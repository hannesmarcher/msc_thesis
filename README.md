# Master Thesis

This is the code base of a master thesis named `Aligning ontologies describing computer science for patents and scientific papers`.

In a nutshell the aim of this master thesis is to compare various ontology alignment approaches
towards their applicability in aligning a patent ontology with two computer science ontologies.
As patent ontology the [Cooperative Patent Classification (CPC)](https://www.cooperativepatentclassification.org/home)
has been considered.
CPC is essentially a classification taxonomy for patents.
As computer science ontologies, there are the [ACM Computing Classification System (CCS)](https://dl.acm.org/ccs)
and the [Computer Science Ontology (CSO)](https://cso.kmi.open.ac.uk/home).
Both ontologies represent systems to label scientific publications, especially in the field of computer science.
To find an appropriate ontology alignment system to align CPC with CCS and CPC with CSO, 
various approaches from the literature have been considered and promising approaches were then implemented.
Afterwards, two ground truths were constructed - one for CPC-CCS and one for CPC-CSO.
These ground truths were subsequently used to evaluate the implemented systems.
The results indicated that LogMap is the best suited system to align CPC with CCS and 
AML is the best suited system to align CPC with CSO.
The evaluation of the final alignments has shown that many correct mappings 
have been predicted, however, at the same time it is important to note that the resulting two alignments
(one alignment for CPC-CCS and one alignment for CPC-CSO) are not sufficient to bridge the semantic
gap between those ontologies.

## Structure of this Repository

This repository is structured into several folders.
Each folder contains the documents/code for one work step that was conducted to elaborate this thesis.

### Resources

Folder: `./resources`

This folder contains all the initial (unmodified) ontologies for CPC, CCS, and CSO, 
the identified software engineering terms from Kotti et al. 2022, 
and the annotated ground truths between CPC-CCS and CPC-CSO.

These data files represent the starting point for the whole pipeline consisting of 
preprocessing, executing all approaches, and evaluation (see the respective upcoming sections).

### Preprocessing

Folder: `./pre_processing`

This folder contains a python project that preprocesses each of the ontologies as well as the ground truth.
It takes all the files form `./resources` as input and outputs all the CPC/CCS/CSO related 
content that is located at `./ontologies` (except the Anatomy related files from the OAEI of 2021).

### Ontologies

Folder: `./ontologies`

This folder contains all the preprocessed ontologies as well as the reference alignment for each ground truth.
The content has been generated through `./pre_processing`.
More precisely, it contains the sub-ontologies (i.e. subsets of CPC, CCS and CSO) that are used to evaluate each approach, 
and the full ontologies. 
All the ontologies are OWL ontologies.

### Literature Review

Folder: `./literature_survey`

This file contains a bib file that comprises all the literature that has been investigated during the literature review.
The field `group` of each bib entry indicates at which stage the respective publication has been rejected or if the 
related approach has been considered for implementation.

### Ontology Alignment Systems

Folder: `./oa_systems`

This file contains all the implemented/employed ontology alignment systems with a script `./oa_systems/run_all.sh` to execute them on the ground truths
and another script `./oa_systems/run_full_alignment_generation.sh` to execute a selected number of approaches on the whole use case.
Note each of the approaches within `./oa_systems` is dockerized to facilitate execution. 

### Evaluator

Folder: `./evaluator`

This folder contains a very simplistic python project to 
(a) evaluate the output of each ontology alignment system against each ground truth, and 
(b) based on the files in `./analysis_full_alignment` it is able to approximate precision \& recall. 
A docker container is provided only for the evaluation of each ontology alignment system on the ground truths.

### Results

Folder: `./results`

This folder contains the outcome of the experiments on the ground truth (generated by `./evaluator`).

### Analysis Final Alignments

Folder: `./analysis_full_alignments`

This folder contains the annotated samples of the final alignments between CPC-CCS and CPC-CSO - 
necessary to approximate precision, recall, and f1-score for the final alignment.


## All Ontology Alignment Systems

8 different systems have been considered (9 if we additionally consider the Baseline).

### Baseline

Folder: `./oa_systems/baseline`

A simple matcher that maps concepts if they have one exact label in common.

### AML

Folder: `./oa_systems/aml`

Publication: Faria, Daniel, et al. "The agreementmakerlight ontology matching system." OTM Confederated International Conferences" On the Move to Meaningful Internet Systems". Springer, Berlin, Heidelberg, 2013.

Uses existing implementation from https://github.com/AgreementMakerLight/AML-Project/releases.

### LogMap

Folder: `./oa_systems/logmap`

Publication: Jim√©nez-Ruiz, Ernesto, and Bernardo Cuenca Grau. "Logmap: Logic-based and scalable ontology matching." International Semantic Web Conference. Springer, Berlin, Heidelberg, 2011.

Uses existing implementation from https://github.com/ernestojimenezruiz/logmap-matcher/releases/tag/logmap-matcher-july-2021.

### LogMapLt

Folder: `./oa_systems/logmap_lite`

Publication and implementation same as LogMap.

### BERTMap-Unsupervised

Folder: `./oa_systems/bertmapunsupervised`

Publication: He, Yuan, et al. "BERTMap: a BERT-based ontology alignment system." Proceedings of the AAAI Conference on Artificial Intelligence. Vol. 36. No. 5. 2022.

The implementation in the respective folder is based on the existing implementation at https://github.com/KRR-Oxford/BERTMap.

### LogMap-ML

Folder: `./oa_systems/logmapml`

Publication: Chen, Jiaoyan, et al. "Augmenting ontology alignment by semantic embedding and distant supervision." European Semantic Web Conference. Springer, Cham, 2021.

The implementation in the respective folder is based on the existing implementation at https://github.com/KRR-Oxford/OntoAlign/tree/main/LogMap-ML.

### A Meta-Matcher

Folder: `./oa_systems/meta_matcher`

Publication: Lu, Jiawei, et al. "A new ontology meta-matching technique with a hybrid semantic similarity measure." Advances in Intelligent Information Hiding and Multimedia Signal Processing. Springer, Singapore, 2020. 37-45.

Re-implementation of the descriptions in the related publication.

### An Evolutionary Matcher

Folder: `./oa_systems/evolutionary_algorithm`

Publication: Lv, Qing, Chengcai Jiang, and He Li. "Solving ontology meta-matching problem through an evolutionary algorithm with approximate evaluation indicators and adaptive selection pressure." IEEE Access 9 (2020): 3046-3064.

Re-implementation of the descriptions in the related publication.

### OntoConnect

Folder: `./oa_systems/`

Publication: Chakraborty, Jaydeep, et al. "Ontoconnect: Unsupervised ontology alignment with recursive neural network." Proceedings of the 36th Annual ACM Symposium on Applied Computing. 2021.

Uses existing implementation from https://github.com/dbpedia/linking.

### SANOM

Folder: `./oa_systems/`

Publication: Mohammadi, Majid, Wout Hofman, and Yao-Hua Tan. "Simulated annealing-based ontology matching." ACM Transactions on Management Information Systems (TMIS) 10.1 (2019): 1-24.

The re-implementation is inspired by https://github.com/amiaty/SANOM.

## Setup

* To re-execute the implemented approaches (see folder `./oa_systems`) docker is a very convenient way.
Therefore, it is recommended to have docker compose installed on your system.

* To execute LogMap-ML a pre-trained Word2Vec model is necessary. 
For example, use the embedding by gensim [link to Google Drive](https://drive.google.com/file/d/1rm9uJEKG25PJ79zxbZUWuaUroWeoWbFR/view?usp=sharing) 
(it is the same as in the original implementation of LogMap-ML [link to the Repository](https://github.com/KRR-Oxford/OntoAlign/tree/main/LogMap-ML)).
After having downloaded the model, extract it to `./oa_systems/large_embeddings/`, and rename the model to `word2vec`. 
Afterwards, the structure should be `./oa_systems/large_embeddings/word2vec`.



## Execution

To run the whole pipeline execute:
* `docker compose -f ./pre_processing/docker-compose.yml up` to perform all the pre-processing steps for CCS, CSO and CPC to (Note the result of this step is already included in the repository - see folders `full_ontologies` and `sub_ontologies`)
* `cd oa_systems`; `run_all.sh` to align ground truth using all ontology alignment systems and to measure the execution time for each approach (the outcome of this step is already checked in)
* `docker compose -f ./evaluator/docker-compose.yml up` evaluates the generated alignment files from the previous stage against the reference alignments generated during stage 1 (the result of this step is already included in the `./results` folder)
* `cd oa_systems`; `run_all_alignment_generation.sh` (outcome already included in the respective folders)
* To approximate precision/recall/f1-score for the final alignments see `./oa_systems/evaluator/full_alignment_analysis` (not yet dockerized)